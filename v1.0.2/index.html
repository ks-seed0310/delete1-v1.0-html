<!doctype html>
<html lang=ja>
<head>
<meta charset=utf-8>
<title>リアルタイム文字・記号除去 一瞬で終わりますが重くなるかも。</title>
<style>
#customWrap { display:none; margin-top:5px; }
textarea { width: 100%; margin-top:5px; }
#consolearea h1 { font-size: 1.2em; }
</style>
</head>
<body>
<h1>リアルタイム文字・記号除去 完全版</h1>
<h2>最新のバージョンにアップデートするにはCtrl+F5またはCtrl+Shift+Rを押してください</h2>


<!-- 削除対象チェックボックス -->
<label><input type="checkbox" id="removeHalf"> 半角スペースを消す</label>
<label><input type="checkbox" id="removeFull"> 全角スペースを消す</label>
<label><input type="checkbox" id="removeLine"> 改行を消す</label>
<label><input type="checkbox" id="removeDigits"> 数字を消す</label>
<label><input type="checkbox" id="removeLetters"> 英字を消す</label>
<label><input type="checkbox" id="removeSymbols"> 記号を消す</label>
<label><input type="checkbox" id="removeCustom"> カスタム文字を消す</label>
<div id="customWrap">
  <textarea id="customText" rows="10" placeholder="消したい文字列を改行で入力"></textarea>
</div>
<textarea id="textarea" rows="10" placeholder="ここに文字を入力しよう!編集されて一番下に出てくるよ!"></textarea>
<br>
<div id="consolearea"><h1>初期化/準備完了。ここにログが出ます。</h1></div>
<br>
<textarea id="outputarea" rows="10" disabled>ここに出力されます</textarea>

<script>
// 要素取得
const textarea = document.getElementById("textarea");
const outputarea = document.getElementById("outputarea");
const consolearea = document.getElementById("consolearea");

const removeHalf = document.getElementById("removeHalf");
const removeFull = document.getElementById("removeFull");
const removeLine = document.getElementById("removeLine");
const removeCustom = document.getElementById("removeCustom");
const customWrap = document.getElementById("customWrap");
const customText = document.getElementById("customText");
const removeDigits = document.getElementById("removeDigits");
const removeLetters = document.getElementById("removeLetters");
const removeSymbols = document.getElementById("removeSymbols");

// カスタム文字チェックボックスで textarea 表示/非表示
removeCustom.addEventListener('change', ()=> {
    customWrap.style.display = removeCustom.checked ? 'block' : 'none';
    runscript();
});

// 入力やチェック変更でリアルタイム実行
textarea.addEventListener('input', runscript);
removeHalf.addEventListener('change', runscript);
removeFull.addEventListener('change', runscript);
removeLine.addEventListener('change', runscript);
removeCustom.addEventListener('change', runscript);
customText.addEventListener('input', runscript);
removeDigits.addEventListener('change', runscript);
removeLetters.addEventListener('change', runscript);
removeSymbols.addEventListener('change', runscript);

// 変換処理
function runscript(){
    let text = textarea.value;

    if(removeHalf.checked) text = text.replace(/ /g,"");
    if(removeFull.checked) text = text.replace(/　/g,"");
    if(removeLine.checked) text = text.replace(/\n/g,"");
    if(removeCustom.checked){
        const list = customText.value.split("\n").filter(s=>s);
        list.forEach(str=>{
            const re = new RegExp(str,"g");
            text = text.replace(re,"");
        });
    }
    if(removeDigits.checked) text = text.replace(/[0-9]/g,"");
    if(removeLetters.checked) text = text.replace(/[a-zA-Z]/g,"");
    if(removeSymbols.checked) text = text.replace(/[`~!@#$%^&*()\-\_=+\[\]{}\\|;:'",<.>\/?¥]/g,"");

    outputarea.value = text;
    consolearea.innerHTML = "<h1>変換済み</h1>";
}
</script>
</body>
</html>
